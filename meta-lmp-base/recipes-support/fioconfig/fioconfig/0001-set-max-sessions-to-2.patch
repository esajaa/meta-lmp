From 8bedf3da037d9cbd48bd7b2ed9a71a12353d9f67 Mon Sep 17 00:00:00 2001
From: Ricardo Salveti <ricardo@foundries.io>
Date: Thu, 23 Jul 2020 19:42:53 -0300
Subject: [PATCH] set max sessions to 2

Signed-off-by: Ricardo Salveti <ricardo@foundries.io>
---
 internal/app.go | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/github.com/foundriesio/fioconfig/internal/app.go b/src/github.com/foundriesio/fioconfig/internal/app.go
index 9617500..4adcbb8 100644
--- a/src/github.com/foundriesio/fioconfig/internal/app.go
+++ b/src/github.com/foundriesio/fioconfig/internal/app.go
@@ -82,6 +82,7 @@ func createClientPkcs11(sota *toml.Tree) (*http.Client, CryptoHandler) {
 		Path:       module,
 		TokenLabel: "aktualizr",
 		Pin:        pin,
+		MaxSessions:        2,
 	}
 
 	ctx, err := crypto11.Configure(&cfg)
-- 
2.27.0

